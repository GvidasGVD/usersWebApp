(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{12:function(e,t,r){e.exports={form:"NewUserForm_form__PCaTH",control:"NewUserForm_control__35j2s",actions:"NewUserForm_actions__2LZx0",error_box:"NewUserForm_error_box__3U1Kp",error_title:"NewUserForm_error_title__1sIbE",error_message:"NewUserForm_error_message__1QPbr"}},197:function(e,t,r){"use strict";r.r(t);var s=r(46),n=r.n(s),a=r(5),c=(r(88),r(2)),i=r(1),u=r(73),l=r.n(u),o=r(0),d=function(e){return Object(o.jsxs)("li",{className:l.a.item,children:[Object(o.jsxs)("figure",{children:[Object(o.jsxs)("blockquote",{children:[Object(o.jsx)("p",{children:e.name}),Object(o.jsx)("p",{children:e.surname})]}),Object(o.jsxs)("figcaption",{children:["Tel.: ",e.phone]}),Object(o.jsxs)("figcaption",{children:["Email: ",e.email]})]}),Object(o.jsx)(a.b,{className:"btn users_details_btn",to:"/usersWebApp/users/".concat(e.id),children:"View Details"})]})},b=r(48),j=r.n(b),p=function(e){var t,r,s=Object(c.g)(),n=Object(c.h)(),a="asc"===new URLSearchParams(n.search).get("sort"),u=(t=e.users,r=a,t.sort((function(e,t){return r?e.name>t.name?1:-1:e.name<t.name?1:-1})));return Object(o.jsxs)(i.Fragment,{children:[Object(o.jsx)("div",{className:j.a.sorting,children:Object(o.jsxs)("button",{onClick:function(){s.push({pathname:n.pathname,search:"?sort=".concat(a?"desc":"asc")})},children:["Sort ",a?"Descending":"Ascending"]})}),Object(o.jsx)("ul",{className:j.a.list,children:u.map((function(e){return Object(o.jsx)(d,{id:e.id,name:e.name,surname:e.surname,phone:e.phone,email:e.email},e.id)}))})]})},h=r(28),m=r(11),x=r(10),O=r(3),f=r.n(O);function v(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object(i.useReducer)(v,{status:t?"pending":null,data:null,error:null}),s=Object(x.a)(r,2),n=s[0],a=s[1],c=Object(i.useCallback)(function(){var t=Object(m.a)(f.a.mark((function t(r){var s,n,c=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.length>1&&void 0!==c[1]?c[1]:null,a({type:"SEND"}),t.prev=2,t.next=5,e(r,s);case 5:n=t.sent,a({type:"SUCCESS",responseData:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(h.a)({sendRequest:c},n)},_="https://users-db-2791b-default-rtdb.europe-west1.firebasedatabase.app/";function N(){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(f.a.mark((function e(){var t,r,s,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/users.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(r=e.sent,t.ok){e.next=8;break}throw new Error(r.message||"Could not fetch users.");case 8:for(n in s=[],r)a=Object(h.a)({id:n},r[n]),s.push(a);return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=Object(m.a)(f.a.mark((function e(t){var r,s,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/users/").concat(t,".json"));case 2:return r=e.sent,e.next=5,r.json();case 5:if(s=e.sent,r.ok){e.next=8;break}throw new Error(s.message||"Could not fetch user.");case 8:return n=Object(h.a)({id:t},s),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(f.a.mark((function e(t){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/users.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(s=e.sent,r.ok){e.next=8;break}throw new Error(s.message||"Could not create user.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(m.a)(f.a.mark((function e(t){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/users/").concat(t,".json"),{method:"DELETE"});case 2:return r=e.sent,e.next=5,r.json();case 5:if(s=e.sent,r.ok){e.next=8;break}throw new Error(s.message||"Could not delete user.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(f.a.mark((function e(t,r){var s,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/users/").concat(r,".json"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return s=e.sent,e.next=5,s.json();case 5:if(n=e.sent,s.ok){e.next=8;break}throw new Error(n.message||"Could not update user.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=r(76),E=r.n(q),P=function(){return Object(o.jsxs)("div",{className:E.a.nousers,children:[Object(o.jsx)("p",{children:"No users found!"}),Object(o.jsx)(a.b,{className:"btn",to:"/usersWebApp/new-user",children:"Add New User"})]})},F=function(){var e=g(N,!0),t=e.sendRequest,r=e.status,s=e.data,n=e.error;return Object(i.useEffect)((function(){t()}),[t]),"pending"===r?Object(o.jsx)("div",{className:"centered",children:" Loading..."}):n?Object(o.jsx)("p",{className:"centered focused",children:n}):"completed"!==r||s&&0!==s.length?Object(o.jsx)(p,{users:s}):Object(o.jsx)(P,{})},I=r(13),M=r(50),W=r.n(M),B=I.a().shape({name:I.b().min(2,"Must be at least 2 digits").max(20,"Must be max 20 digits").required(),surname:I.b().min(2,"Must be at least 2 digits").max(20,"Must be max 20 digits").required(),birth_date:I.b().test("DOB","wrong DOB, at least 1 year",(function(e){return W()().diff(W()(e),"years")>=1})).required(),email:I.b().required().email("Wrong email formating"),password:I.b().min(4,"Must be at least 4 digits").max(10,"Must be max 10 digits").required(),phone:I.b().required().matches(/^[0-9]+$/,"Must be only digits").min(5,"Must be at least 5 digits").max(11,"Must be max 11 digits"),identity:I.b().required().matches(/^[0-9]+$/,"Must be only digits").min(2,"Must be at least 2 digits").max(5,"Must be max 5 digits"),passport_number:I.b().required().matches(/^[0-9]+$/,"Must be only digits").min(5,"Must be at least 5 digits").max(11,"Must be max 11 digits")}),T=r(81),L=r.n(T);var G=function(e){return Object(o.jsx)("div",{className:L.a.card,children:e.children})},V=r(12),H=r.n(V),J=function(e){var t=Object(i.useRef)(),r=Object(i.useRef)(),s=Object(i.useRef)(),n=Object(i.useRef)(),a=Object(i.useRef)(),c=Object(i.useRef)(),u=Object(i.useRef)(),l=Object(i.useRef)(),d=Object(i.useState)(),b=Object(x.a)(d,2),j=b[0],p=b[1],h=function(){var i=Object(m.a)(f.a.mark((function i(o){var d,b,j,h,m,x,O,v,g,_;return f.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o.preventDefault(),d=t.current.value,b=r.current.value,j=s.current.value,h=n.current.value,m=a.current.value,x=c.current.value,O=u.current.value,v=l.current.value,0!==d.trim().length&&0!==b.trim().length&&0!==j.trim().length&&0!==h.trim().length&&0!==m.trim().length&&0!==x.trim().length&&0!==O.trim().length&&0!==v.trim().length){i.next=12;break}return p({title:"Invalid input",message:"Cannot insert empty values."}),i.abrupt("return");case 12:if(!(d.length<2||d.length>20)){i.next=15;break}return p({title:"Invalid Name",message:"Name should be at least 2 symbols and not more than 20 symbols."}),i.abrupt("return");case 15:if(!(b.length<2||b.length>20)){i.next=18;break}return p({title:"Invalid Surname",message:"Surname should be at least 2 symbols and not more than 20 symbols."}),i.abrupt("return");case 18:if(!(m.length<2||m.length>15)){i.next=21;break}return p({title:"Invalid Password",message:"Should be at least 6 symbols but not more than 15 symbols"}),i.abrupt("return");case 21:if(!(x.length<5||x.length>13)){i.next=24;break}return p({title:"Invalid Phone number",message:"Should be at least 5 but not more than 13 digits "}),i.abrupt("return");case 24:if("ID"===O||"Passport"===O){i.next=27;break}return p({title:"Identity error",message:"Only ID or Passport can be chosen "}),i.abrupt("return");case 27:if(!(v.length<5||v.length>9)){i.next=30;break}return p({title:"Invalid Passport number",message:"Should be at least 5 but not more than 9 digits "}),i.abrupt("return");case 30:if(!(new Date(j)>new Date)){i.next=33;break}return p({title:"Invalid Date of Birth",message:"Please insert valid date of birth"}),i.abrupt("return");case 33:if(g=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},g(h)&&!(h.length>50)){i.next=37;break}return p({title:"Invalid Email format",message:"Please check if email format is correct"}),i.abrupt("return");case 37:_={name:d,surname:b,birth_date:j,email:h,password:m,phone:x,identity:O,passport_number:v},e.onAddUser(_);case 39:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return Object(o.jsxs)(G,{children:[j&&Object(o.jsxs)("div",{className:H.a.error_box,children:[" ",Object(o.jsx)("div",{className:H.a.error_title,children:j.title}),Object(o.jsx)("div",{className:H.a.error_message,children:j.message})]}),Object(o.jsxs)("form",{className:H.a.form,onSubmit:h,children:[Object(o.jsxs)("div",{className:H.a.control,children:[Object(o.jsxs)("div",{className:"w-50",children:[Object(o.jsx)("label",{htmlFor:"Name",children:"Name"}),Object(o.jsx)("input",{type:"text",required:!0,id:"Name",ref:t})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"Surname",children:"Surname"}),Object(o.jsx)("input",{type:"text",required:!0,id:"Surname",ref:r})]})]}),Object(o.jsxs)("div",{className:H.a.control,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"birthdate",children:"Birth Date"}),Object(o.jsx)("input",{type:"date",required:!0,id:"birthdate",ref:s})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email"}),Object(o.jsx)("input",{id:"email",type:"email",required:!0,ref:n})]})]}),Object(o.jsxs)("div",{className:H.a.control,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{id:"password",type:"password",required:!0,ref:a})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"phone",children:"Phone"}),Object(o.jsx)("input",{id:"phone",type:"number",required:!0,ref:c})]})]}),Object(o.jsxs)("div",{className:H.a.control,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"identity",children:"Identity"}),Object(o.jsxs)("select",{id:"identity",ref:u,required:!0,children:[Object(o.jsx)("option",{value:"ID",defaultValue:!0,children:"ID"}),Object(o.jsx)("option",{value:"Passport",children:"Passport"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"passportnumber",children:"Passport Number"}),Object(o.jsx)("input",{id:"passportnumber",type:"number",required:!0,ref:l})]})]}),Object(o.jsx)("div",{className:H.a.actions,children:Object(o.jsx)("button",{children:"Add User"})})]})]})},z=function(){var e=g(R),t=e.sendRequest,r=e.status,s=Object(c.g)();Object(i.useEffect)((function(){"completed"===r&&s.push("/usersWebApp/users")}),[r,s]);return Object(o.jsx)(J,{onAddUser:function(e){t(e)}})},$=r(6),Y=r.n($),Z=r(82),Q=(r(196),function(e){var t=Object(c.g)(),r=Object(i.useState)(!1),s=Object(x.a)(r,2),n=s[0],u=s[1],l=g(S,!0),d=l.sendRequest,b=l.status,j=Object(i.useRef)(),p=Object(i.useRef)(),h=Object(i.useRef)(),O=Object(i.useRef)(),v=Object(i.useRef)(),_=Object(i.useRef)(),N=Object(i.useRef)(),w=Object(i.useRef)();Object(i.useEffect)((function(){"completed"===b&&t.push("/usersWebApp/users")}),[b,t]);var y=function(){u(!n)},k=function(){var t=Object(m.a)(f.a.mark((function t(r){var s,n,a,c,i,u,l,o,d;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),s=j.current.value?j.current.value:e.name,n=p.current.value?p.current.value:e.surname,a=h.current.value?h.current.value:e.birth_date,c=O.current.value?O.current.value:e.email,i=v.current.value?v.current.value:e.password,u=_.current.value?_.current.value:e.phone,l=N.current.value?N.current.value:e.identity,o=w.current.value?w.current.value:e.passport_number,d={name:s,surname:n,birth_date:a,email:c,password:i,phone:u,identity:l,passport_number:o},y(),t.next=13,B.isValid(d);case 13:t.sent?e.sendUpdateRequest(d,e.id):alert("Could not update, wrong values inserted");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=Object(o.jsx)("input",{type:"text",placeholder:e.name,ref:j}),U=Object(o.jsx)("input",{type:"text",placeholder:e.surname,ref:p}),A=Object(o.jsx)("input",{type:"date",ref:h}),D=Object(o.jsx)("input",{type:"email",placeholder:e.email,ref:O}),C=Object(o.jsx)("input",{type:"password",placeholder:"******",ref:v}),q=Object(o.jsx)("input",{type:"number",placeholder:e.phone,ref:_}),E=Object(o.jsx)("input",{type:"number",placeholder:e.identity,ref:N}),P=Object(o.jsx)("input",{type:"number",placeholder:e.passport_number,ref:w});return Object(o.jsxs)("div",{className:Y.a.details,children:[Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Name: "}),Object(o.jsx)("p",{children:n?R:e.name})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Surname: "}),Object(o.jsx)("p",{children:n?U:e.surname})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Date of Birth: "}),Object(o.jsx)("p",{children:n?A:e.birth_date})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Email: "}),Object(o.jsx)("p",{children:n?D:e.email})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Password: "}),Object(o.jsx)("p",{children:n?C:"*****"})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Phone: "}),Object(o.jsx)("p",{children:n?q:e.phone})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Identity: "}),Object(o.jsx)("p",{children:n?E:e.identity})]}),Object(o.jsxs)("div",{className:Y.a.flex,children:[Object(o.jsx)("p",{children:"Passport No: "}),Object(o.jsx)("p",{children:n?P:e.passport_number})]}),Object(o.jsxs)("div",{className:Y.a.btnField,children:[Object(o.jsx)(a.b,{className:"btn ".concat(Y.a.detailsBtn),to:"/usersWebApp/users",children:"Back"}),Object(o.jsx)("button",{className:"btn ".concat(Y.a.detailsBtn),onClick:y,children:n?"Cancel editing":"Edit"}),n&&Object(o.jsx)("button",{className:"btn ".concat(Y.a.detailsBtn),onClick:k,children:"Save"}),Object(o.jsx)("button",{className:"btn ".concat(Y.a.detailsBtn),onClick:function(){Object(Z.confirmAlert)({title:"Delete this user?",message:"",buttons:[{label:"Yes",onClick:function(){return d(e.id)}},{label:"No",onClick:function(){return""}}]})},children:"Delete User"})]})]})}),K=function(){var e=Object(c.i)(),t=g(D,!0),r=t.sendRequest,s=t.status,n=e.userId,a=g(y,!0),u=a.sendRequest,l=a.status,d=a.data,b=a.error;Object(i.useEffect)((function(){u(n)}),[u,s,n]);return"pending"===l?Object(o.jsx)("div",{className:"centered",children:" Loading..."}):b?Object(o.jsx)("p",{className:"centered focused",children:b}):d?Object(o.jsx)(i.Fragment,{children:Object(o.jsx)(Q,{id:n,name:d.name,surname:d.surname,birth_date:d.birth_date,email:d.email,password:d.password,phone:d.phone,identity:d.identity,passport_number:d.passport_number,sendUpdateRequest:function(e,t){r(e,t)}})}):Object(o.jsx)("p",{children:"No User found"})},X=r(83),ee=r.n(X),te=r(21),re=r.n(te),se=function(){return Object(o.jsxs)("header",{className:re.a.header,children:[Object(o.jsxs)("div",{className:re.a.logo,children:["Users Web App",Object(o.jsx)("a",{className:re.a.linkToGit,href:"https://github.com/GvidasGVD/usersWebApp/tree/master/src",target:"_blank",rel:"noopener noreferrer",children:"See code in GitHub"})]}),Object(o.jsx)("nav",{className:re.a.nav,children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(a.c,{to:"/usersWebApp/users",activeClassName:re.a.active,children:"All Users"})}),Object(o.jsx)("li",{children:Object(o.jsx)(a.c,{to:"/usersWebApp/new-user",activeClassName:re.a.active,children:"Add New User"})})]})})]})},ne=function(e){return Object(o.jsxs)(i.Fragment,{children:[Object(o.jsx)(se,{}),Object(o.jsx)("main",{className:ee.a.main,children:e.children})]})},ae=function(){return Object(o.jsx)("div",{className:"centered",children:Object(o.jsx)("p",{children:"Page not found!"})})};var ce=function(){return Object(o.jsx)(ne,{children:Object(o.jsxs)(c.d,{children:[Object(o.jsx)(c.b,{path:"/usersWebApp/users",exact:!0,children:Object(o.jsx)(c.a,{to:"/usersWebApp"})}),Object(o.jsx)(c.b,{path:"/usersWebApp",exact:!0,children:Object(o.jsx)(F,{})}),Object(o.jsx)(c.b,{path:"/usersWebApp/users/:userId",children:Object(o.jsx)(K,{})}),Object(o.jsx)(c.b,{path:"/usersWebApp/new-user",children:Object(o.jsx)(z,{})}),Object(o.jsx)(c.b,{path:"/usersWebApp/usersWebApp",exact:!0,children:Object(o.jsx)(c.a,{to:"/usersWebApp/users"})}),Object(o.jsx)(c.b,{path:"*",children:Object(o.jsx)(ae,{})})]})})};n.a.render(Object(o.jsx)(a.a,{children:Object(o.jsx)(ce,{})}),document.getElementById("root"))},21:function(e,t,r){e.exports={header:"MainNavigation_header__9Wrod",logo:"MainNavigation_logo__23HYm",nav:"MainNavigation_nav__19LmH",active:"MainNavigation_active__tSAdF",linkToGit:"MainNavigation_linkToGit__3JHsx"}},48:function(e,t,r){e.exports={list:"UserList_list__1YjXN",sorting:"UserList_sorting__w9p22"}},6:function(e,t,r){e.exports={details:"UserDetails_details__1VsOj",flex:"UserDetails_flex__24Thi",btnField:"UserDetails_btnField__3n78W",detailsBtn:"UserDetails_detailsBtn__P5vyk",passwordInput:"UserDetails_passwordInput__1cGp8"}},73:function(e,t,r){e.exports={item:"UserItem_item__38Vzn"}},76:function(e,t,r){e.exports={nousers:"NoUserFound_nousers__2PhQ8"}},81:function(e,t,r){e.exports={card:"Card_card__3ONz9"}},83:function(e,t,r){e.exports={main:"Layout_main__9Ppdw"}},88:function(e,t,r){}},[[197,1,2]]]);
//# sourceMappingURL=main.1ec548bf.chunk.js.map